

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Adding new molecule &mdash; NMRlipids Databank v1.3.1.dev7+g57a424f5b 1.3.1.dev7+g57a424f5b documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=0a7e822a"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Universal molecule and atom names" href="../schemas/moleculesAndMapping.html" />
    <link rel="prev" title="Experiment metadata" href="../schemas/experiment_metadata.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            NMRlipids Databank v1.3.1.dev7+g57a424f5b
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Python Interface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dbprograms.html">DatabankLib CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Overview.html">Project structure</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Membrane Databank</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../dbstructure.html">Data Organization</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../dbcontribute.html">Data Contribution</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="addingSimulation.html">Adding simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="addingExpData.html">Adding experimental data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Adding new molecule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#metadata-file-creation">Metadata file creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mapping-file-creation">Mapping file creation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../schemas/moleculesAndMapping.html">Universal molecule and atom names</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NMRlipids Databank v1.3.1.dev7+g57a424f5b</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../dbcontribute.html">Data Contribution</a></li>
      <li class="breadcrumb-item active">Adding new molecule</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/contrib/addingMolecule.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="adding-new-molecule">
<span id="addnewmol"></span><h1>Adding new molecule<a class="headerlink" href="#adding-new-molecule" title="Link to this heading"></a></h1>
<p>First, please do not hesitate to ask assistance via [BilayerData GitHub
issues](<a class="reference external" href="https://github.com/NMRlipids/BilayerData/issues">https://github.com/NMRlipids/BilayerData/issues</a>).</p>
<p>If you are adding data into the databank and your molecule(s) <code class="docutils literal notranslate"><span class="pre">YOURMOL</span></code> do not exist,
you need to create a new one by adding a folder <code class="file docutils literal notranslate"><span class="pre">membrane/YOURMOL/</span></code> inside
<code class="xref py py-data docutils literal notranslate"><span class="pre">NMLDB_MOL_PATH</span></code> folder. When contributing to the standard NMRlipids Data
repository, <a class="reference external" href="https://github.com/NMRlipids/BilayerData">BilayerData</a>, you are adding
into <code class="file docutils literal notranslate"><span class="pre">Molecules/membrane</span></code> folder.</p>
<p>The folder should contain at least two files: metadata file <code class="file docutils literal notranslate"><span class="pre">metadata.yaml</span></code> and
mapping file <code class="file docutils literal notranslate"><span class="pre">yourmol-forcefieldname-mapping.yaml</span></code> (this name is arbitrary, but
you should make it clear).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./ ├── Simulations/ ├── experiments/ ├── info_files/ ├── lipid_json_buildH/ ├──</span>
<span class="go">Ranking/ └── Molecules/</span>
<span class="go">    └── membrane/</span>
<span class="go">        └── YOURMOL/</span>
<span class="go">            ├── yourmol-forcefield2-mapping.yaml └── metadata.yaml</span>
</pre></div>
</div>
<section id="metadata-file-creation">
<h2>Metadata file creation<a class="headerlink" href="#metadata-file-creation" title="Link to this heading"></a></h2>
<p>Please provide metadata about the molecule in a <code class="file docutils literal notranslate"><span class="pre">metadata.yaml</span></code> in the same
subfolder of <code class="file docutils literal notranslate"><span class="pre">Molecules/membrane/YOURMOLECULE</span></code>. You can find the template in
<code class="docutils literal notranslate"><span class="pre">Molecules/metadata-example.yaml</span></code>. TODO: metadata-example doesn’t exist!</p>
<p>The recommended workflow is to start from the <a class="reference external" href="https://en.wikipedia.org/wiki/International_Chemical_Identifier">InChI</a>. You can obtain the
InChI and InChIKey for your molecule via different methods. One possiblity is to use a
PDB snapshot of your trajectory (extracted by GROMACS, VMD, MDAnalysis …) and to add
connectivty using <a class="reference external" href="https://www.rdkit.org/">RDkit</a> or <a class="reference external" href="https://gitlab.com/KomBioMol/gromologist">gromologist</a> and convert a single molecule to InChI via
<a class="reference external" href="https://www.rdkit.org/">RDkit</a> or <a class="reference external" href="https://openbabel.org/index.html">OpenBabel</a>. We
use the neutral form of the molecule. Please indicate the charge of the molecule in your
<code class="file docutils literal notranslate"><span class="pre">metadata.yaml</span></code> under <code class="docutils literal notranslate"><span class="pre">charge:</span></code>.</p>
<p>Please ensure that the InChI represents your molecule. The named tools might deliver
imperfect results. Provided your molecule is not fully synthetic or novel, you can
obtain most of the other metadata from the <a class="reference external" href="https://pubchem.ncbi.nlm.nih.gov/docs/pug-rest">PubChem API</a> and the <a class="reference external" href="https://www.ebi.ac.uk/unichem/api/docs">UniChem API</a> using the InChIKey. Mapping especially to
LIPID MAPS and SwissLipids might be incomplete in some cases and can be completed
manually.</p>
</section>
<section id="mapping-file-creation">
<h2>Mapping file creation<a class="headerlink" href="#mapping-file-creation" title="Link to this heading"></a></h2>
<p>The easiest way is to take similar already existing mapping file and modify that. If
atoms in a lipid belong to different residues, which is typical situation in Amber force
fields, for example see <a class="reference external" href="https://github.com/NMRLipids/BilayerData/blob/main/Molecules/membrane/POPC/mappingPOPClipid17.yaml">here</a>,
add the residue name to <code class="docutils literal notranslate"><span class="pre">RESIDUE</span></code> key of each atom in the mapping file. In this case,
give the name of the head group residue in the <code class="docutils literal notranslate"><span class="pre">COMPOSITION</span></code> dictionary in <a class="reference internal" href="../schemas/simulation_metadata.html#readmesimu"><span class="std std-ref">the
README.yaml file</span></a>.</p>
<p>The mapping file should contain all the atoms of the molecules.</p>
<p>Specific cases: - TODO: mapping for UA</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../schemas/experiment_metadata.html" class="btn btn-neutral float-left" title="Experiment metadata" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../schemas/moleculesAndMapping.html" class="btn btn-neutral float-right" title="Universal molecule and atom names" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, NMRlipids Open Collaboration
    OSI Approved: GNU General Public License v3 (GPLv3)
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version
   .
        <p>
            <a href="https://github.com/NMRLipids/Databank/blob/main/LICENSE.txt"
            target="_blank"
            rel="noopener">
            Link to GNU GPL v3 License
            </a>
        </p>
        <p>
            <a href="https://github.com/NMRLipids/Databank"
            target="_blank"
            rel="noopener">
            Link to the GitHub repository
            </a>
        </p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>